"use strict";var app=angular.module("ir",["ngRoute","ir.debug","ir.constants","ir.controllers","ir.directives","ir.factories","ir.providers","ir.services","ir.filters","ir.internal.dashboards","ir.internal.iracing","ir.internal.shift_lights","ir.internal.shift_points","ir.internal.window","ir.dashboards.mercedes_amg_gt3","ir.dashboards.formula_renault_20"]);app.config(["$locationProvider",function(r){r.html5Mode(!0)}]),app.config(["$routeProvider",function(r){r.when("/config",{templateUrl:"views/config.html"}).otherwise({redirectTo:"/config/dashboards"})}]);
"use strict";var EngineWarnings={WATER_TEMP_WARNING:1,FUEL_PRESSURE_WARNING:2,OIL_PRESSURE_WARNING:4,ENGINE_STALLED:8,PIT_SPEED_LIMITER:16,REV_LIMITER_ACTIVE:32},Flags={CHECKERED:1,WHITE:2,GREEN:4,YELLOW:8,RED:16,BLUE:32,DEBRIS:64,CROSSED:128,YELLOW_WAVING:256,ONE_LAP_TO_GREEN:512,GREEN_HELD:1024,TEN_TO_GO:2048,FIVE_TO_GO:4096,RANDOM_WAVING:8192,CAUTION:16384,CAUTION_WAVING:32768,BLACK:65536,DISQUALIFY:131072,SERVICIBLE:262144,FURLED:524288,REPAIR:1048576},StartLights={START_HIDDEN:268435456,START_READY:536870912,START_SET:1073741824,START_GO:2147483648},TrackLocation={NOT_IN_WORLD:-1,OFF_TRACK:0,IN_PIT_STALL:1,APROACHING_PITS:2,ON_TRACK:3},SessionStates={INVALID:0,GET_IN_CAR:1,WARMUP:2,PARADE_LAPS:3,RACING:4,CHECKERED:5,COOL_DOWN:6};angular.module("ir.constants",[]).constant("EngineWarnings",EngineWarnings).constant("Flags",Flags).constant("StartLights",StartLights).constant("TrackLocation",TrackLocation).constant("SessionStates",SessionStates);
"use strict";var app=angular.module("ir.controllers",[]);app.controller("MainCtrl",["$scope","$location",function(r,i){r.key=function(r){r.ctrlKey&&"Comma"==r.code&&i.path("/config")}}]),app.controller("BaseCtrl",["$scope","iRacing","ShiftPoints","Helpers",function(r,i,e,n){r.ir=i.data,r.revs=[],r.blink=0,r.shift=0,r.max=0,r.red=0,r.first=0,r.last=0,r.idle=0,r.drivers=0,r.carId=null,r.shiftPoints={},e.all().then(function(i){r.shiftPoints=i})["catch"](function(r){console.error(r)}),r.$watch("ir.DriverInfo",function(i,e){i&&null!=i&&(r.revs=n.numRevs(i.DriverCarRedLine),r.max=n.highestRev(r.revs),r.blink=i.DriverCarSLBlinkRPM,r.shift=i.DriverCarSLShiftRPM,r.first=i.DriverCarSLFirstRPM,r.last=i.DriverCarSLLastRPM,r.idle=i.DriverCarIdleRPM,r.red=i.DriverCarRedLine,r.drivers=i.Drivers.length,r.carId=_.find(i.Drivers,function(r){return r.CarIdx==i.DriverCarIdx}).CarID)})}]);
"use strict";var app=angular.module("ir.debug",[]);
"use strict";var app=angular.module("ir.directives",[]);app.directive("irdBack",["$window",function(i){return{link:function(n,c,r){c.on("click",function(){i.history.back()})}}}]),app.directive("irdRevPit",["Helpers","EngineWarnings",function(i,n){return{restrict:"ACE",link:function(i,c,r){i.$watch("ir.EngineWarnings",function(i,r){return i&n.PIT_SPEED_LIMITER?void("block"!=c.css("display")&&c.css("display","block")):void("none"!=c.css("display")&&c.css("display","none"))})}}}]);
"use strict";var app=angular.module("ir.factories",[]);
"use strict";var app=angular.module("ir.filters",[]);app.filter("lapTime",["Helpers",function(e){return function(n){return e.formatLapTime(n)}}]),app.filter("fixed",[function(){return function(e,n){return null==e||"undefined"==typeof e?"-":e.toFixed(n||0)}}]),app.filter("speed",[function(){return function(e){return null==e||"undefined"==typeof e?"-":(3.6*e).toFixed(0)}}]),app.filter("gear",[function(){return function(e){return null==e||"undefined"==typeof e?"-":0==e?"N":-1==e?"R":e}}]);
"use strict";var app=angular.module("ir.providers",[]);
"use strict";var app=angular.module("ir.services",["ngWebSocket"]);app.service("Electron",[function(){return require("electron")}]),app.factory("Cars",["$http",function(t){return{all:function(){return t.get("/api/cars").then(function(t){return t.data})}}}]),app.factory("iRacing",["$rootScope","$websocket","Kutu",function(t,n,e){var o=!1,r=!1,a=!0,c=n("ws://localhost:3000"),u={set connected(n){o=!0,t.$apply()},get connected(){return o},set running(n){r=n,t.$apply()},get running(){return r},set firstTime(n){a=n,t.$apply()},get firstTime(){return a},data:{}};return c.onError(function(t){console.error("ws:error",t)}),c.onOpen(function(){console.log("ws:open"),u.connected=!0,_.forIn(u.data,function(t,n){u.data[n]=null,delete u.data[n]})}),c.onClose(function(){console.log("ws:close"),u.connected=!1,u.running=!1,_.forIn(data,function(t,n){u.data[n]=null,delete u.data[n]})}),c.onMessage(function(t){var n=JSON.parse(t.data.replace(/\bNaN\b/g,"null"));n.disconnected&&(u.running=!1),(n.connected||a&&!o)&&(a=!1,u.running=!0,_.forIn(n,function(t,n){u.data[n]=null,delete u.data[n]})),_.forIn(n.data,function(t,n){u.data[n]=t})}),u}]),app.service("Helpers",[function(){this.formatLapTime=function(t){if(null==t||0>=t)return"--";var n=parseInt(t/60),e=parseInt(t)-60*n,o=parseInt(_.split(t.toFixed(10>n?3:2),".")[1]);return n+":"+this.leftPad(e,2)+"."+this.leftPad(o,3)},this.leftPad=function(t,n){return _.padStart(t,n,0)},this.numRevs=function(t){return _.range(0,_.ceil(t/1e3))},this.highestRev=function(t){return 1e3*(_.last(t)+1)}}]);
"use strict";var app=angular.module("ir.dashboards.formula_renault_20.controllers",[]);app.controller("FormulaRenault20Ctrl",["$scope",function(r){r.times=function(r){return _.range(0,r)}}]);
"use strict";var app=angular.module("ir.dashboards.formula_renault_20",["ir.dashboards.formula_renault_20.controllers","ir.dashboards.formula_renault_20.directives","ir.internal.dashboards"]);app.config(["DashboardsProvider",function(r){r.add("formula_renault_20","Formula Renault 2.0",74)}]),app.config(["$routeProvider",function(r){r.when("/dashboards/formula_renault_20",{templateUrl:"views/dashboards/formula_renault_20.html",controller:"FormulaRenault20Ctrl"})}]);
"use strict";var _slicedToArray=function(){function r(r,i){var t=[],n=!0,e=!1,a=void 0;try{for(var l,s=r[Symbol.iterator]();!(n=(l=s.next()).done)&&(t.push(l.value),!i||t.length!==i);n=!0);}catch(o){e=!0,a=o}finally{try{!n&&s["return"]&&s["return"]()}finally{if(e)throw a}}return t}return function(i,t){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return r(i,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),app=angular.module("ir.dashboards.formula_renault_20.directives",[]);app.directive("irdBoardsRenaultRevbar",["$document","Helpers","ShiftPoints",function(r,i,t){return{restrict:"ACE",link:function(r,i,t){var n=void 0,e=void 0;r.$watch("$last",function(){n=i.children().children(),e=100/n.length}),r.$watchGroup(["ir.Gear","ir.RPM"],function(t,a){var l=_slicedToArray(t,2),s=l[0],o=l[1];if(s&&null!=s&&o&&null!=o&&r.blink&&r.idle){var c=r.shiftPoints[r.carId]||{},u=c[s]||r.blink,d=r.idle;if(console.log("hihihi",n,e,s,o,u,d),o>=u){if(!i.hasClass("shift"))return void i.addClass("shift")}else i.hasClass("shift")&&i.removeClass("shift");var f=(o-d)/(u-d)*100;_.forEach(n,function(r,i){var t=angular.element(r);f>=e*i?"block"!=t.css("display")&&t.css("display","block"):"none"!=t.css("display")&&t.css("display","none")})}})}}}]);
"use strict";var app=angular.module("ir.dashboards.mercedes_amg_gt3.controllers",[]);app.controller("MercedesAmgGt3Ctrl",["$scope",function(r){}]);
"use strict";var app=angular.module("ir.dashboards.mercedes_amg_gt3",["ir.dashboards.mercedes_amg_gt3.controllers","ir.dashboards.mercedes_amg_gt3.directives","ir.dashboards.mercedes_amg_gt3.filters","ir.internal.dashboards"]);app.config(["DashboardsProvider",function(e){e.add("mercedes_amg_gt3","Mercedes AMG GT3",72)}]),app.config(["$routeProvider",function(e){e.when("/dashboards/mercedes_amg_gt3",{templateUrl:"views/dashboards/mercedes_amg_gt3.html",controller:"MercedesAmgGt3Ctrl"})}]);
"use strict";var _slicedToArray=function(){function i(i,r){var n=[],t=!0,e=!1,s=void 0;try{for(var a,o=i[Symbol.iterator]();!(t=(a=o.next()).done)&&(n.push(a.value),!r||n.length!==r);t=!0);}catch(u){e=!0,s=u}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw s}}return n}return function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return i(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),app=angular.module("ir.dashboards.mercedes_amg_gt3.directives",[]);app.directive("irdBoardsAmgGt3FuelPressWarn",["EngineWarnings",function(i){return{link:function(r,n,t){r.$watch("ir.EngineWarnings",function(r,t){r&i.FUEL_PRESSURE_WARNING?n.addClass("warning"):n.removeClass("warning")})}}}]),app.directive("irdBoardsAmgGt3WaterTempWarn",["EngineWarnings",function(i){return{link:function(r,n,t){r.$watch("ir.EngineWarnings",function(r,t){r&i.WATER_TEMP_WARNING?n.addClass("warning"):n.removeClass("warning")})}}}]),app.directive("irdBoardsAmgGt3WaterTemp",function(){return{link:function(i,r,n){i.$watch("ir.WaterTemp",function(i,n){if(!i||null==i)return void r.text("-");var t=_.split(i.toFixed(1),"."),e=_slicedToArray(t,2),s=e[0],a=e[1];r.html(s+"<sub>.</sub><sup>"+a+"</sup>")})}}}),app.directive("irdBoardsAmgGt3OilPressWarn",["EngineWarnings",function(i){return{link:function(r,n,t){r.$watch("ir.EngineWarnings",function(r,t){r&i.OIL_PRESSURE_WARNING?n.addClass("warning"):n.removeClass("warning")})}}}]),app.directive("irdBoardsAmgGt3OilTemp",function(){return{link:function(i,r,n){i.$watch("ir.OilTemp",function(i,n){if(!i||null==i)return void r.text("-");var t=_.split(i.toFixed(1),"."),e=_slicedToArray(t,2),s=e[0],a=e[1];r.html(s+"<sub>.</sub><sup>"+a+"</sup>")})}}}),app.directive("irdBoardsAmgGt3BrakeBias",function(){return{link:function(i,r,n){i.$watch("ir.dcBrakeBias",function(i,n){if(!i||null==i)return void r.text("-");var t=_.split(i.toFixed(1),"."),e=_slicedToArray(t,2),s=e[0],a=e[1];r.html(s+"<sub>.</sub><sup>"+a+"</sup>")})}}}),app.directive("irdBoardsAmgGt3Voltage",function(){return{link:function(i,r,n){i.$watch("ir.Voltage",function(i,n){if(!i||null==i)return void r.text("-");var t=_.split(i.toFixed(1),"."),e=_slicedToArray(t,2),s=e[0],a=e[1];r.html(s+"<sub>.</sub><sup>"+a+"</sup>")})}}}),app.directive("irdBoardsAmgGt3Tank",function(){return{link:function(i,r,n){i.$watch("ir.FuelLevel",function(i,n){if(!i||null==i||0>=i)return void r.text("-");var t=_.split(i.toFixed(1),"."),e=_slicedToArray(t,2),s=e[0],a=e[1];r.html(s+"<sub>.</sub><sup>"+a+"</sup>")})}}}),app.directive("irdBoardsAmgGt3Fuel",function(){return{link:function(i,r,n){i.$watch("ir.FuelLevel",function(i,n){return!i||null==i||0>=i?void r.text("-"):void r.text("-")})}}}),app.directive("irdBoardsAmgGt3Pit",function(){return{link:function(i,r,n){i.$watch("ir.FuelLevel",function(i,n){return!i||null==i||0>=i?void r.text("-"):void r.text("-")})}}}),app.directive("irdBoardsAmgGt3Take",function(){return{link:function(i,r,n){i.$watch("ir.FuelLevel",function(i,n){return!i||null==i||0>=i?void r.text("-"):void r.text("-")})}}}),app.directive("irdBoardsAmgGt3Lap",function(){return{link:function(i,r,n){i.$watchGroup(["ir.SessionInfo","ir.Lap","ir.SessionNum"],function(i,n){var t=_slicedToArray(i,3),e=t[0],s=t[1],a=t[2];if(!e||null==e||!s||null==s||null==a)return void r.text("-");var o="/",u=void 0;return"unlimited"==e.Sessions[a].SessionLaps?void r.html(s):("unlimited"!=e.Sessions[a].SessionLaps&&(u=e.Sessions[a].SessionLaps),void r.html(s+"<sub>"+o+"</sub><sup>"+u+"</sup>"))})}}}),app.directive("irdBoardsAmgGt3Pos",function(){return{link:function(i,r,n){i.$watch("ir.PlayerCarPosition",function(n,t){return n&&null!=n?void r.html(n+"<sub>/</sub><sup>"+i.drivers+"</sup>"):void r.text("-")})}}}),app.directive("irdBoardsAmgGt3Delta",function(){return{link:function(i,r,n){i.$watch("ir.LapDeltaToBestLap",function(i,n){return i&&null!=i?(i=i.toFixed(3),0>i?void r.html(i):i>0?void r.html("+"+i):void r.html("&plusmn;"+i)):void r.html("--")})}}}),app.directive("irdBoardsAmgGt3DeltaColor",function(){return{link:function(i,r,n){i.$watch("ir.LapDeltaToBestLap",function(i,n){if(i&&null!=i){if(0>i)return r.removeClass("fasslowerter"),void r.addClass("faster");if(i>0)return r.removeClass("faster"),void r.addClass("slower");r.removeClass("faster"),r.removeClass("slower")}})}}}),app.directive("irdBoardsAmgGt3RevShift",["Helpers",function(i){return{restrict:"ACE",link:function(i,r,n){i.$watchGroup(["ir.Gear","ir.RPM"],function(n,t){var e=_slicedToArray(n,2),s=e[0],a=e[1];if(s&&null!=s&&a&&null!=a){var o=i.shiftPoints[i.carId]||{},u=o[s]||i.blink;a>=u?"block"!=r.css("display")&&r.css("display","block"):"none"!=r.css("display")&&r.css("display","none")}})}}}]),app.directive("irdBoardsAmgGt3RevbarAmgGt3",["Helpers",function(i){return{restrict:"ACE",link:function(i,r,n){i.$watch("ir.RPM",function(n,t){if(n&&null!=n){var e=i.max,s=n;return s>=e?void r.css("width","100%"):s>0?void r.css("width",s/e*100+"%"):void r.css("width","0%")}})}}}]);
"use strict";var app=angular.module("ir.dashboards.mercedes_amg_gt3.filters",[]);
"use strict";var app=angular.module("ir.internal.dashboards.controllers",[]);app.controller("DashboardsCtrl",["$scope","Dashboards",function(a,r){a.dashboards=r.all()}]);
"use strict";var app=angular.module("ir.internal.dashboards",["ir.internal.dashboards.controllers","ir.internal.dashboards.providers","ir.internal.dashboards.services"]);app.config(["$routeProvider",function(r){r.when("/config/dashboards",{templateUrl:"views/dashboards.html",controller:"DashboardsCtrl"})}]);
"use strict";var app=angular.module("ir.internal.dashboards.providers",[]);app.provider("Dashboards",[function(){var r=[];this.add=function(a,n,i){console.log(r),r.push({id:a,name:n,carId:i})},this.$get=function(){return{all:function(){return r}}}}]);
"use strict";var app=angular.module("ir.internal.dashboards.services",[]);
"use strict";var app=angular.module("ir.internal.iracing.controllers",[]);app.controller("iRacingCtrl",["$scope","Kutu","iRacing",function(n,c,t){n.connected=t.connected,n.running=t.running,n.kutu={},c.all().then(function(c){n.kutu=c})["catch"](function(n){console.error(n)}),n.save=function(t){c.save(t).then(function(c){n.kutu=c})["catch"](function(n){console.error(n)})}}]);
"use strict";var app=angular.module("ir.internal.iracing",["ir.internal.iracing.controllers","ir.internal.iracing.services"]);app.config(["$routeProvider",function(i){i.when("/config/iracing",{templateUrl:"views/iracing.html",controller:"iRacingCtrl"})}]);
"use strict";var app=angular.module("ir.internal.iracing.services",[]);app.service("Kutu",["$http",function(t){return{all:function(){return t.get("/api/kutu").then(function(t){return t.data})},save:function(n){return t.post("/api/kutu",n).then(function(t){return t.data})}}}]);
"use strict";var app=angular.module("ir.internal.shift_lights.controllers",[]);app.controller("ShiftLightsCtrl",["$scope",function(t){}]);
"use strict";var app=angular.module("ir.internal.shift_lights",["ir.internal.shift_lights.controllers","ir.internal.shift_lights.services"]);app.config(["$routeProvider",function(i){i.when("/config/shift-lights",{templateUrl:"views/shift_lights.html",controller:"ShiftLightsCtrl"})}]);
"use strict";var app=angular.module("ir.internal.shift_lights.services",[]);app.service("ShiftLights",[function(){return{all:function(){},save:function(){}}}]);
"use strict";var app=angular.module("ir.internal.shift_points.controllers",[]);app.controller("ShiftPointsCtrl",["$scope","Cars","ShiftPoints",function(t,n,i){t.allShiftPoints={},i.all().then(function(n){t.allShiftPoints=n})["catch"](function(t){console.error("err")}),t.availableCars=[],n.all().then(function(n){t.availableCars=n})["catch"](function(t){console.error(t)}),t.selectedCarId=null,t.carShiftPoints={},t.$watch("selectedCarId",function(n,i){return n?t.allShiftPoints.hasOwnProperty(n)?void(t.carShiftPoints=t.allShiftPoints[n]):void(t.carShiftPoints={}):void 0}),t.$watch("carShiftPoints",function(n,i){return n&&_.keys(n).length&&_.sum(_.values(n))?void(t.allShiftPoints[t.selectedCarId]=n):void delete t.allShiftPoints[t.selectedCarId]},!0),t.save=function(n){i.save(n).then(function(n){t.allShiftPoints=n})["catch"](function(t){console.error(t)})}}]);
"use strict";var app=angular.module("ir.internal.shift_points",["ir.internal.shift_points.controllers","ir.internal.shift_points.services"]);app.config(["$routeProvider",function(i){i.when("/config/shift-points",{templateUrl:"views/shift_points.html",controller:"ShiftPointsCtrl"})}]);
"use strict";var app=angular.module("ir.internal.shift_points.services",[]);app.factory("ShiftPoints",["$http",function(t){return{all:function(){return console.log("shift-points:get"),t.get("/api/shift-points").then(function(t){return t.data})},save:function(n){return console.log("shift-points:set"),t.post("/api/shift-points",n).then(function(t){return t.data})}}}]);
"use strict";var app=angular.module("ir.internal.window.controllers",[]);app.controller("WindowCtrl",["$scope","Config","Electron",function(n,o,i){n.config={},o.all().then(function(o){n.config=o})["catch"](function(n){console.error(n)}),n.window={};var e=i.remote.getCurrentWindow();n.window={size:e.getSize(),position:e.getPosition()},e.on("resize",function(){n.window.size=e.getSize()}),e.on("move",function(){n.window.position=e.getPosition()}),n.save=function(i){o.save(i).then(function(o){n.config=o})["catch"](function(n){console.error(n)})}}]);
"use strict";var app=angular.module("ir.internal.window",["ir.internal.window.controllers","ir.internal.window.services"]);app.config(["$routeProvider",function(n){n.when("/config/window",{templateUrl:"views/window.html",controller:"WindowCtrl"})}]);
"use strict";var app=angular.module("ir.internal.window.services",[]);app.service("Config",["$http",function(n){return{all:function(){return n.get("/api/config").then(function(n){return n.data})},save:function(t){return n.post("/api/config",t).then(function(n){return n.data})}}}]);