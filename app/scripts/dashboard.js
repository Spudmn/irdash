"use strict";!function(r,i){r.module("irdApp",["irdControllers","irdDirectives","irdServices","irdFilters"])}(angular);
"use strict";var WATER_TEMP_WARNING=1,FUEL_PRESSURE_WARNING=2,OIL_PRESSURE_WARNING=4,ENGINE_STALLED=8,PIT_SPEED_LIMITER=16,REV_LIMITER_ACTIVE=32,CHECKERED=1,WHITE=2,GREEN=4,YELLOW=8,RED=16,BLUE=32,DEBRIS=64,CROSSED=128,YELLOW_WAVING=256,ONE_LAP_TO_GREEN=512,GREEN_HELD=1024,TEN_TO_GO=2048,FIVE_TO_GO=4096,RANDOM_WAVING=8192,CAUTION=16384,CAUTION_WAVING=32768,BLACK=65536,DISQUALIFY=131072,SERVICIBLE=262144,FURLED=524288,REPAIR=1048576,START_HIDDEN=268435456,START_READY=536870912,START_SET=1073741824,START_GO=2147483648,NOT_IN_WORLD=-1,OFF_TRACK=0,IN_PIT_STALL=1,APROACHING_PITS=2,ON_TRACK=3,SESSION_STATE_INVALID=0,SESSION_STATE_GET_IN_CAR=1,SESSION_STATE_WARMUP=2,SESSION_STATE_PARADE_LAPS=3,SESSION_STATE_RACING=4,SESSION_STATE_CHECKERED=5,SESSION_STATE_COOL_DOWN=6;
"use strict";!function(r,i){var e=r.module("irdControllers",[]);e.controller("irdCtrl",["$scope","iRacing","Dashboard",function(r,i,e){r.ir=i.data,r.revs=[],r.blink=0,r.base=0,r.max=0,r.drivers=0,r.revs=[4,5,6,7,8,9],r.blink=8750,r.base=4e3,r.max=9e3,r.drivers=32,r.ir.PlayerCarPosition=1,r.ir.FuelLevel=57.8,r.ir.Gear=4,r.ir.Speed=23.5,r.ir.dcABS=4,r.ir.dcThrottleShape=10,r.ir.dcTractionControl=8,r.ir.WaterTemp=89.9,r.ir.OilPress=7,r.ir.OilTemp=89.9,r.ir.dcBrakeBias=49.8,r.ir.Voltage=13.9,r.ir.Lap=3,r.ir.LapLastLapTime=236.3772,r.ir.LapBestLapTime=238.8743,r.ir.SessionNum=1,r.ir.SessionInfo={Sessions:{1:{SessionLaps:7}}},r.ir.RPM=7450,r.ir.LapDeltaToBestLap=-2.399,r.$watch("ir.DriverInfo",function(i,a){i&&null!=i&&(r.revs=e.numRevs(i.DriverCarRedLine),r.blink=i.DriverCarSLBlinkRPM,r.base=1e3*r.revs[0],r.max=i.DriverCarRedLine,r.drivers=i.Drivers.length)})}])}(angular);
"use strict";!function(i,n){var r=i.module("irdDirectives",[]);r.directive("irdFuelPressWarn",function(){return{link:function(i,n,r){i.$watch("ir.EngineWarnings",function(i,r){i&FUEL_PRESSURE_WARNING?n.addClass("warning"):n.removeClass("warning")})}}}),r.directive("irdWaterTempWarn",function(){return{link:function(i,n,r){i.$watch("ir.EngineWarnings",function(i,r){i&WATER_TEMP_WARNING?n.addClass("warning"):n.removeClass("warning")})}}}),r.directive("irdOilPressWarn",function(){return{link:function(i,n,r){i.$watch("ir.EngineWarnings",function(i,r){i&OIL_PRESSURE_WARNING?n.addClass("warning"):n.removeClass("warning")})}}}),r.directive("irdBrakeBias",function(){return{link:function(i,n,r){i.$watch("ir.dcBrakeBias",function(i,r){if(!i||null==i)return void n.text("-");var t=_.split(i.toFixed(1),".");n.html(t[0]+"<sup>."+t[1]+"</sup>")})}}}),r.directive("irdVoltage",function(){return{link:function(i,n,r){i.$watch("ir.Voltage",function(i,r){if(!i||null==i)return void n.text("-");var t=_.split(i.toFixed(1),".");n.html(t[0]+"<sup>."+t[1]+"</sup>")})}}}),r.directive("irdTank",function(){return{link:function(i,n,r){i.$watch("ir.FuelLevel",function(i,r){if(!i||null==i||0>=i)return void n.text("-");var t=_.split(i.toFixed(1),".");n.html(t[0]+"<sup>."+t[1]+"</sup>")})}}}),r.directive("irdFuel",function(){return{link:function(i,n,r){i.$watch("ir.FuelLevel",function(i,r){return!i||null==i||0>=i?void n.text("-"):void 0})}}}),r.directive("irdPit",function(){return{link:function(i,n,r){i.$watch("ir.FuelLevel",function(i,r){return!i||null==i||0>=i?void n.text("-"):void 0})}}}),r.directive("irdTake",function(){return{link:function(i,n,r){i.$watch("ir.FuelLevel",function(i,r){return!i||null==i||0>=i?void n.text("-"):void 0})}}}),r.directive("irdLap",function(){return{link:function(i,n,r){i.$watchGroup(["ir.SessionInfo","ir.Lap","ir.SessionNum"],function(i,r){var t=i[0],e=i[1],s=i[2];if(!t||null==t||!e||null==e||null==s)return void n.text("-");var o=void 0,u="/";return"unlimited"==t.Sessions[s].SessionLaps?void n.html(e):("unlimited"!=t.Sessions[s].SessionLaps&&(o=t.Sessions[s].SessionLaps),void n.html(e+"<sup>"+u+o+"</sup>"))})}}}),r.directive("irdPos",function(){return{link:function(i,n,r){i.$watch("ir.PlayerCarPosition",function(r,t){return r&&null!=r?void n.html(r+"<sup>/"+i.drivers+"</sup>"):void n.text("-")})}}}),r.directive("irdDelta",function(){return{link:function(i,n,r){i.$watch("ir.LapDeltaToBestLap",function(i,r){return i&&null!=i?(i=i.toFixed(3),0>i?void n.html(i):i>0?void n.html("+"+i):void n.html("&plusmn;"+i)):void n.html("--")})}}}),r.directive("irdDeltaColor",function(){return{link:function(i,n,r){i.$watch("ir.LapDeltaToBestLap",function(i,r){if(i&&null!=i){if(0>i)return n.removeClass("fasslowerter"),void n.addClass("faster");if(i>0)return n.removeClass("faster"),void n.addClass("slower");n.removeClass("faster"),n.removeClass("slower")}})}}}),r.directive("irdRevbar",["Dashboard",function(i){return{restrict:"AEC",link:function(i,n,r){i.$watch("ir.RPM",function(r,t){if(r&&null!=r){var e=(i.revs,i.base),s=i.max,o=r;return o>=s?void n.css("width","100%"):o>e?void n.css("width",(o-e)/(s-e)*100+"%"):void n.css("width","0%")}})}}}]),r.directive("irdMarkers",[function(){return{restrict:"AEC",templateUrl:"views/marker.html"}}]),r.directive("irdRevPit",["Dashboard",function(i){return{restrict:"AEC",link:function(i,n,r){i.$watch("ir.EngineWarnings",function(i,r){return i&PIT_SPEED_LIMITER?void("block"!=n.css("display")&&(n.css("display","block"),n.addClass("blink"))):void("none"!=n.css("display")&&(n.removeClass("blink"),n.css("display","none")))})}}}]),r.directive("irdRevShift",["Dashboard",function(i){return{restrict:"AEC",link:function(i,n,r){i.$watch("ir.RPM",function(r,t){if(r&&null!=r){var e=i.blink,s=r;s>=e?"block"!=n.css("display")&&n.css("display","block"):"none"!=n.css("display")&&n.css("display","none")}})}}}])}(angular);
"use strict";!function(n,e,t){var r=n.module("irdFilters",[]);r.filter("lapTime",["Dashboard",function(n){return function(t){if(null==t||"undefined"==typeof t||0>=t)return"--";var r=parseInt(t/60),u=parseInt(t)-60*r,i=parseInt(e.split(t.toFixed(9>r?3:2),".")[1]);return r+":"+n.leftPad(u,"00")+"."+n.leftPad(i,"000")}}]),r.filter("fixed",[function(){return function(n,e){return null==n||"undefined"==typeof n?"-":n.toFixed(e||0)}}]),r.filter("speed",[function(){return function(n){return null==n||"undefined"==typeof n?"-":(3.6*n).toFixed(0)}}]),r.filter("gear",[function(){return function(n){return null==n||"undefined"==typeof n?"-":0==n?"N":-1==n?"R":n}}])}(angular,_);
"use strict";!function(n,t){var e=void 0,s=[].slice;e=function(n,t,e,s,o,i){this.requestParams=null!=n?n:[],this.requestParamsOnce=null!=t?t:[],this.fps=null!=e?e:1,this.server=null!=s?s:"127.0.0.1:8182",this.readIbt=null!=o?o:!1,this.record=null!=i?i:null,this.data={},this.onConnect=null,this.onDisconnect=null,this.onUpdate=null,this.ws=null,this.onWSConnect=null,this.onWSDisconnect=null,this.reconnectTimeout=null,this.connected=!1,this.firstTimeConnect=!0,"undefined"!=typeof record&&null!==record?this.loadRecord():this.connect()},e.prototype.connect=function(){return this.ws=new WebSocket("ws://"+this.server+"/ws"),this.ws.onopen=function(n){return function(){return n.onopen.apply(n,arguments)}}(this),this.ws.onmessage=function(n){return function(){return n.onmessage.apply(n,arguments)}}(this),this.ws.onclose=function(n){return function(){return n.onclose.apply(n,arguments)}}(this)},e.prototype.onopen=function(){var n;"function"==typeof this.onWSConnect&&this.onWSConnect(),null!=this.reconnectTimeout&&clearTimeout(this.reconnectTimeout);for(n in this.data)delete this.data[n];return this.ws.send(JSON.stringify({fps:this.fps,readIbt:this.readIbt,requestParams:this.requestParams,requestParamsOnce:this.requestParamsOnce}))},e.prototype.onmessage=function(n){var t,e,s,o,i;if(t=JSON.parse(n.data.replace(/\bNaN\b/g,"null")),t.disconnected&&(this.connected=!1,this.onDisconnect&&this.onDisconnect()),t.connected)for(e in this.data)delete this.data[e];if((t.connected||this.firstTimeConnect&&!this.connected)&&(this.firstTimeConnect=!1,this.connected=!0,this.onConnect&&this.onConnect()),t.data){s=[],o=t.data;for(e in o)i=o[e],s.push(e),this.data[e]=i;if(this.onUpdate)return this.onUpdate(s)}},e.prototype.onclose=function(){return"function"==typeof this.onWSDisconnect&&this.onWSDisconnect(),this.ws&&(this.ws.onopen=this.ws.onmessage=this.ws.onclose=null),this.connected&&(this.connected=!1,this.onDisconnect&&this.onDisconnect()),this.reconnectTimeout=setTimeout(function(n){return function(){return n.connect.apply(n)}}(this),2e3)},e.prototype.sendCommand=function(){var n,t;return t=arguments[0],n=2<=arguments.length?s.call(arguments,1):[],this.ws.send(JSON.stringify({command:t,args:n}))},e.prototype.loadRecord=function(){var n;return n=new XMLHttpRequest,n.onreadystatechange=function(){var t;return 4===n.readyState&&200===n.status?(t=JSON.parse(n.responseText),console.log(t)):void 0},n.open("GET",this.record,!0),n.send()},n.IRacing=e}(window);
"use strict";!function(n,e,t,r){var o=n.module("irdServices",[]);o.service("iRacing",["$rootScope","Dashboard",function(n,e){var r=new t(["DriverInfo","SessionInfo","WeekendInfo","__all_telemetry__"],[],60);return r.onWSConnect=function(){return n.wsConnected=!0,n.$apply()},r.onWSDisconnect=function(){return n.wsConnected=!1,n.$apply()},r.onConnect=function(){return n.connected=!0,n.$apply()},r.onDisconnect=function(){return n.connected=!1,n.$apply()},r.onUpdate=function(e){return e.indexOf("DriverInfo")>=0,e.indexOf("SessionInfo")>=0,e.indexOf("WeekendInfo")>=0,n.$apply()},r}]),o.service("Dashboard",[function(){return{formatLapTime:function(n){if(null==n||0>=n)return"--";var t=parseInt(n/60),r=parseInt(n)-60*t,o=parseInt(e.split(n.toFixed(10>t?3:2),".")[1]);return t+":"+this.leftPad(r,"00")+"."+this.leftPad(o,"000")},leftPad:function(n,e){return n=n.toString(),e.substring(0,e.length-n.length)+n},numRevs:function(n){var t=this.parseThousands(n),r=parseInt(t+"000");if(r!=n){var o=r+1e3;o>n&&(t=this.parseThousands(o))}return e.range(t-5,t)},parseThousands:function(n){return n=n.toString(),5==n.length?parseInt(n[0]+n[1]):parseInt(n[0])}}}])}(angular,_,window.IRacing);